name: Format date and time
inputs:
  - {name: Date, type: DateTime}
  - {name: Format, type: String, default: "%Y-%m-%d %H:%M:%S.%N", description: "Format string for date and time. See [man date](https://linux.die.net/man/1/date)."}
outputs:
  - {name: Formatted date, type: String}
metadata:
  annotations:
    author: Alexey Volkov <alexey.volkov@ark-kun.com>
    canonical_location: 'https://raw.githubusercontent.com/Ark-kun/pipeline_components/master/components/basics/Format_date_time/component.yaml'
implementation:
  container:
    image: ubuntu
    command:
      - sh
      - -exc
      - |
        date="$0"
        format="$1"
        output_path="$2"
        mkdir -p "$(dirname "$output_path")"

        date -d "$date" +"$format" >"$output_path"
      - {inputValue: Date}
      - {inputValue: Format}
      - {outputPath: Formatted date}
